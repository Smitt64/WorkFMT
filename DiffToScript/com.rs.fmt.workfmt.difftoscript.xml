<?xml version = "1.0" encoding = "UTF-8"?>
<changelog project="Diff to Script">
    <version ver="1.0.1.3">
        <fix>Исправлена ошибка генерации скриптов по данным из новых dat файлов для таблиц, у которых нет уникальных индексов</fix>
    </version>
    <version ver="1.0.1.2">
        <fix>Убрана конструкция &quot;RETURNING INTO&quot; из инструкции &quot;DELETE FROM&quot;</fix>
        <fix>Исправлены &quot;DROP FUNCTION&quot; в ветке конвертации для &quot;Oracle&quot;</fix>
        <fix>Исправлено формирование имени настройки для таблицы &quot;dregparm_dbt&quot; если обновлялось наименование</fix>
        <fix>Исправлена ошибка, не позволяющая отключать в настройках использование макроов для таблиц</fix>
    </version>
    <version ver="1.0.1.1">
        <add>Добавлена возможность писать скрипты генерации для отдельных таблиц на rsl</add>
        <add>Добавлена кнопка &quot;Reset&quot; на последней странице мастера, перезапускающая wizzard с начала</add>
        <add>Добавлены &quot;drop function&quot; для &quot;PostgreSQL&quot;</add>
        <add>Добавлены ссылки на статьи confluence в раздел &quot;Справка&quot;</add>
        <add>Добавлен раздел с настройками</add>
        <add>Добавлен макрос генерации для таблицы &quot;dregparm_dbt&quot;</add>
        <fix>Исправлено добавление лишних записей в секцию &quot;update&quot;</fix>
        <fix>Исправлено дублирование ключей в условиях &quot;where&quot;</fix>
    </version>
    <version ver="1.0.0.11">
        <add>Добавлен суффикс &quot;__&quot; к наименованим функций вставки записей в таблицу, во избежание пересечений с рукописными функциями</add>
    </version>
	<version ver="1.0.0.10">
        <add>Добавлен параметр &quot;--updtbl&quot; - который генерирует alter table скрипты по дыннм изменений</add>
        <fix>Исправлена генерация insert функции для связанных таблиц с автоинкрементным полем у родительской таблицы. Теперь insert корректно помещается в блок &quot;IF THEN&quot;</fix>
        <fix>Исправлена передача параметров в insert функцию, теперь не будут передаваться астоинкрементные поля</fix>
        <fix>Исправлен парсер строк, теперь если строки различаются только переносом строки в конце, то такие строки игнорируются</fix>
    </version>
    <version ver="1.0.0.9">
        <fix>Исправлен алгоритм определения операций по записям. Теперь ключевые поля записи учитываются корректно</fix>
        <fix>Исправлен алгоритм формирования блока where операций по записям. Теперь ключевые поля записи учитываются корректно</fix>
    </version>
    <version ver="1.0.0.8">
        <fix>Исправлена генерация скриптов в случае, когда в dat файл добавлялись новые колонки</fix>
        <add>Добавлен параметр &quot;--dat&quot; - путь до dat файла, по которому будет определяться порядок полей в секции данных</add>
        <add>Добавлен параметр &quot;--diff&quot; - который возвращает json с данными об изменениях</add>
    </version>
    <version ver="1.0.0.7">
        <add>Убран код ошибки для скриптов Oracle, приводивший к отвалу апгрейдора пр  повторном выполнении</add>
    </version>
    <version ver="1.0.0.6">
        <fix>Обертка HEXTORAW вернулась на свое место</fix>
    </version>
    <version ver="1.0.0.5">
        <fix>Исправлен не верный формат дат</fix>
        <fix>Исправлено неправильное определение строк при обновлении записи в dat файле, поэтому в where условия не соответствовали обновляемой строке</fix>
    </version>
    <version ver="1.0.0.4">
        <add>Insert скрипты теперь добавляют значения по умолчанию для отсутствующих в *.dat файле колонок</add>
        <add>Добавлено сообщене, если набор полей в *.dat файле не соответствует набору в fmt словаре</add>
    </version>
	<version ver="1.0.0.3">
		<add>Добавлена обработка исключений DUP_VAL_ON_INDEX (in Oracle) и UNIQUE_VIOLATION (in PostgreSQL) для insert скриптов</add>
		<add>Добавлена обертка HEXTORAW для blob полей (in Oracle)</add>
        <add>Добавлено игнорирование инструкции &quot;\ No newline at end of file&quot;</add>
        <add>Добавлен вызов rsb_ainc.disable_trigger, rsb_ainc.enable_trigger и rsb_ainc.restore_seq для таблиц с автоинкрементным индексом</add>
        <add>Добавлена обертка в функции/процедуры для insert запросов</add>
        <add>Добавлена обработка исключений с описанием полей, при вставке которых, происходит ошибка вставки записей</add>
        <fix>Заменена конструкция TO_DATE на glob_func.to_timestamp_immutable для скриптов на PostgreSQL</fix>
        <fix>Исправлена ситуация, когда для update скрпипта смежной талицы не учитывалось значение индекса из родительской</fix>
    </version>
    <version ver="1.0.0.2">
        <add>Добавлена обертка decode(hex) для blob полей (in PostgreSQL)</add>
        <add>Добавлена обертка decode(hex), to_date и chr при генерации скриптов update (in PostgreSQL)</add>
        <add>Добавлена ссылка на confluence</add>
        <fix>Исправлено падение в ситуации, когда количество полей в dat файле отличалось от записи fmt</fix>
        <fix>Исправлена ошибка генерации скриптов, когда порядок полей в dat файлах не совпадал с fmt</fix>
    </version>
    <version ver="1.0.0.1">
        <add>Добавлены перечисления полей из структуры dat файлов для insert запросов</add>
        <fix>Исправлена генерация запросов для "новых" файлов</fix>
        <fix>Исправлена ситуация, когда некоторые скрипты дублировались при генерации в интерфейсном режиме</fix>
    </version>
    <version ver="1.0.0.0">
        <add>Генерация скриптов по локальным изменениям</add>
    </version>
</changelog>
